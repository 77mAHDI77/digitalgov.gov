{{/* All Tags */}}
{{/* lists out the tags for the site */}}
{{- define "content" -}}

<main role="main" class="taxonomy">
  <div class="grid-container grid-container-desktop">

    <div class="grid-row grid-gap-4">
      <div class="grid-col-12">
        <header>
          {{- $topics := (where .Site.Pages "Section" "topics") -}}
          <h1>Topics</h1>
          <h4>There are {{ len $topics }} topics</h4>
        </header>
      </div>
    </div>

    <div class="grid-row grid-gap-2">
      {{- $top_topics := $.Site.Taxonomies.topics -}}
      {{- range $name, $taxonomy := $top_topics -}}
        {{- with $.Site.GetPage (printf "/topics/%s" $name) -}}
          {{- if or (eq .Params.weight 2) (eq .Params.weight 3) -}}
            <div class="grid-col-12 tablet:grid-col-4 tablet:flex-6">
              <div class="topic topic-slim" data-edit-this="{{- .File.Path -}}">
                <h3>
                  <a class="text-no-underline text-ink" href="{{- .URL | absURL -}}" title="{{- .Title -}}">{{- .Title -}}</a>
                </h3>
              </div>
            </div>
          {{- end -}}
        {{- end -}}
      {{- end -}}
    </div>

    {{/* TOPICS / Categories / Tags */}}
    <div class="grid-row">
      <div class="grid-col-6">
        <section>
          <ul class="add-list-reset">
            {{- $topics := (where .Site.Pages "Section" "topics") -}}
            {{- range $name, $taxonomy := $topics.ByTitle -}}
              <li>
                <a href="{{- .Permalink -}}" title="{{- $name -}}"><span>{{- .Title -}}</span></a>
              </li>
            {{- end -}}
          </ul>
        </section>
      </div>
      <div class="grid-col-6">
        <section>
          <ul class="add-list-reset">
            {{- $topics_tax := $.Site.Taxonomies.topics -}}
            {{- len $topics_tax -}}
            {{- range $name, $taxonomy := $topics_tax -}}
              {{- with $.Site.GetPage (printf "/topics/%s" $name) -}}
                <li><a href="{{- .Permalink -}}">{{- .Title -}}</a></li>
              {{- end -}}
            {{- end -}}
          </ul>
        </section>
      </div>
    </div>

  </div>
</main>

{{- end -}}
