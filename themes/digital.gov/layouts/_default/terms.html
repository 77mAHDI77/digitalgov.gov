{{ define "content" }}

<main role="main" class="taxonomy">
  <div class="grid-container grid-container-desktop">

    <div class="grid-row grid-gap-4">
      <div class="grid-col-12">
        <header>
          {{ $data := $.Site.Data }}
          <h1>{{ .Title }}</h1>
          <h4>There are {{ len $.Data.Terms }} {{ $.Data.Plural }}</h4>
        </header>
      </div>
    </div>


    {{ if eq $.Data.Plural "authors" }}

    {{/* Authors */}}
    <div class="grid-row">
      <div class="grid-col-12">
        <section>
          <ul class="add-list-reset">
            {{/* OUTPUT NAMES THAT MATCH DATA */}}
            {{ range $tax := $.Data.Terms.Alphabetical }}
              {{ $uid := $tax.Name | urlize }}
              {{ $author := index $data.people.authors $uid }}
                {{ $link := printf "authors/%s/" $uid }}
                <li><a href="{{ $link | absURL }}">{{ $author.display_name | default $uid }} ({{ $tax.Count }})</a></li>
            {{ end }}
          </ul>
        </section>
      </div>
    </div>

    {{ else }}

    {{/* TOPICS / Categories / Tags */}}
    <div class="grid-row">
      <div class="grid-col-12">
        <section>
          <ul class="add-list-reset">
            {{ range $tag, $title := index $data $.Data.Plural }}
              {{ $link := printf "%s/%s/" $.Data.Plural $tag }}
              {{ $terms := first 1 (where $.Data.Terms.Alphabetical ".Name" $tag) }}
              {{ range $page := $terms }}
                <li><a href="{{ $link | absURL }}">{{ $title.display_name }} ({{ $page.Count }})</a></li>
              {{ end }}
            {{ end }}
          </ul>
        </section>
      </div>
    </div>

    <div class="grid-row">
      <div class="grid-col-12">
        <section>
          <h2>Taxonomy Table</h2>
          <table>
            {{ range $tag, $title := index $data $.Data.Plural }}
              {{ $link := printf "%s/%s/" $.Data.Plural $tag }}
              {{ $terms := first 1 (where $.Data.Terms.Alphabetical ".Name" $tag) }}
              {{ range $page := $terms }}
                <tr>
                  <td><a href="{{ $link | absURL }}">{{ $title.display_name }}</a></td>
                  <td>{{ $tag }}</td>
                  <td>{{ $page.Count }}</td>
                </tr>
              {{ end }}
            {{ end }}
            <tr>

          </table>

          </ul>
        </section>
      </div>
    </div>
    {{ end }}

  </div>
</main>

{{ end }}
