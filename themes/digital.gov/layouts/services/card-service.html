<div class="card-service" data-edit-this="/edit/{{- .Type -}}/?page=https://digital.gov{{- (urls.Parse .Permalink).Path -}}">

  {{/* set the href as a variable */}}
  {{ $href := "" }}
  {{- if .Params.source_url -}}
    {{- $href = .Params.source_url -}}
  {{- else -}}
    {{- $href = .Permalink -}}
  {{- end -}}

  {{/* Icons
  Get the "source" in the file and looks up the icon that is used there.
  */}}
  {{- $source := $.Site.GetPage "page" (print "source_" .Params.source ) -}}
  {{- if $source -}}

    {{- $src := (printf "/logos/%s%s" $source.Params.icon "-logo.png") -}}
    {{- template "icon" dict "src" $src "alt" $source.Params.name "href" $href -}}


  {{- else if .Params.icon -}}

    {{- $src := (printf "/logos/%s%s" .Params.icon "-logo.png") -}}
    {{- template "icon" dict "src" $src "alt" .Params.name "href" $href -}}

  {{- else -}}

    {{- template "icon" dict "src" "/logos/digit-gold.png" "alt" .Params.source "href" $href -}}

  {{- end -}}

  <div class="copy">
    <h3><a href="{{- $href -}}" title="{{- .Params.title -}}">{{- .Params.title -}}</a></h3>

    <p>{{- .Params.summary | markdownify -}}</p>

    {{- if .Params.authors -}}
      {{- partial "core/get_authors_short" (dict "page" . "contact" .Params.contact ) -}}
    {{- end -}}

  </div>

</div>

{{- define "icon" -}}
  <div class="icon">
    <a href="{{- .href -}}" title="{{- .alt -}}"><img src="{{ .src | relURL }}" alt="{{- .alt }} logo"></a>
  </div>
{{- end -}}
