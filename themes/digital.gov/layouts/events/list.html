{{ define "content" }}

<main role="main" id="events" class="collection">
  <div class="grid-container padding-x-2">
    <div class="grid-row">
      <div class="grid-col-12">
        <header>
          <h1>Upcoming Events</h1>
        </header>
      </div>
    </div>
    <div class="grid-row grid-gap-3">
      <div class="grid-col-12">
        <section>
          {{ range .Data.Pages.Reverse }}
          {{ $now := now.Format "2006-01-02" }}
          {{ $start := .Date.Format "2006-01-02"  }}

          {{ if .Params.End_date }}
            {{ $end := dateFormat "2006-01-02" .Params.End_date }}
            {{ if or (ge $start $now) (ge $end $now)}}
              {{ if .Params.registration_url }}
                {{ .Render "event-card"}}
              {{ end }}
            {{ end }}

            {{ else if ge $start $now }}
              {{ if .Params.registration_url }}
                {{ .Render "event-card"}}
              {{ end }}
            {{ end }}
          {{ end }}
        </section>
      </div>
    </div>
  </div>
</main>

<div id="events-past" class="display-none events-list">

  <div class="events-head">
    <h1>Past Events</h1>
    <p><a href="https://www.youtube.com/digitalgov" title="View all DigitalGov videos and training">All training & videos Â»</a></p>
  </div>

  {{ $events := where .Site.RegularPages.ByDate "Section" "events" }}
  {{ range where $events.Reverse ".Date.Unix" "<" now.Unix }}
    {{ .Render "past"}}
  {{ end }}

</div>
{{ end }}
