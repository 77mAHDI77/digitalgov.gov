{{ define "pagevars" }}
  {{ $.Scratch.Set "bodyclasses" "tribe_events-template-default single single-tribe_events tribe-js tribe-filter-live c-sw unboxed centercatnav bodybg1 events-single tribe-events-style-full tribe-events-style-theme tribe-theme-wp-enlightened tribe-events-page-template tribe-is-responsive tribe-mobile" }}

{{ end }}

{{ define "content" }}

{{ partial "event-venue--inPerson.html" . }}

<div class="entry event">
  <div class="event-head">
    <a class="breadcrumb" href="{{ "events/" | absURL }}"> &laquo; All Events </a>
    <h1>{{ .Title | markdownify }}</h1>
    <div class="event-details">
      {{ if eq .Params.event_type "online" }}
      <p class="event-type" title="{{ $.Scratch.Get "displaytitle" }}" >Online</p>
      {{ else if eq .Params.event_type "youtube-live" }}
      <p class="event-type" title="{{ $.Scratch.Get "displaytitle" }}" >YouTube LIVE</p>
      {{ else if eq .Params.event_type "mixed" }}
      <p class="event-type" title="{{ $.Scratch.Get "displaytitle" }}" >In-person & Online</p>
      {{ else }}
      <p class="event-type" title="{{ $.Scratch.Get "displaytitle" }}" >In-Person</p>
      {{ end }}
      <span class="event-date">
        {{ with .Date }}
        {{ . | dateFormat "Monday, January 02" }}
        {{ end }}
        <span>
          {{ with .Date }}
          {{ . | dateFormat "3:04 PM" }}
          {{ end }} –
          {{ with .Params.end_date }}
          {{ . | dateFormat "3:04 PM ET" }}
          {{ end }}
        </span>
      </span>
    </div>


    <div class="event-actions">
      <a class="btn event_register" href="{{ .Params.registration_url }}" onclick="__gaTracker('send', 'event', 'outbound-article', '{{ .Params.registration_url }}', 'REGISTER NOW');">Register</a>
      {{ $event_startDate := dateFormat "2006-01-02 03:04:05" (time .Params.date).UTC }}
      {{ $event_endDate := dateFormat "2006-01-02 03:04:05" (time .Params.end_date).UTC }}
      {{ $event_title := .Title | markdownify }}
      {{ $event_description := .Summary | markdownify }}
      {{ $event_location := .Params.venue.venue_name }}

      <span class="addtocalendar btn">
        <var class="atc_event">
          <var class="atc_date_start">{{ $event_startDate }}</var>
          <var class="atc_date_end">{{ $event_endDate }}</var>
          <var class="atc_timezone">UTC</var>
          <var class="atc_title">{{ $event_title }}</var>
          <var class="atc_description">{{ $event_description }}</var>
          <var class="atc_location">{{ $event_location }}</var>
          <var class="atc_organizer">DigitalGov</var>
          <var class="atc_organizer_email">digitalgov@gsa.gov</var>
        </var>
      </span>
    </div>

  </div>

  <!-- If event_type == "online" -->
  {{ if eq .Params.event_type "online" }}

    {{ if (isset .Params "youtube_id") }}
      {{ partial "event-stage.html" . }}
    {{ end }}

  <!-- else if "youtube-live" -->
  {{ else if eq .Params.event_type "youtube-live" }}
    {{ if (isset .Params "youtube_id") }}
      {{ partial "event-stage.html" . }}
    {{ end }}

  <!-- else if "mixed" -->
  {{ else if eq .Params.event_type "mixed" }}

    {{ if (isset .Params "youtube_id") }}
      {{ partial "event-stage.html" . }}
    {{ end }}

  {{ end }}

  <div class="event-content">
    {{ .Content }}
  </div>

  <!-- location -->
  {{ if eq .Params.event_type "mixed" }}

    {{ partial "event-location.html" . }}

  {{ else if eq .Params.event_type "in-person" }}

  	{{ partial "event-location.html" . }}

  {{ end }}

  <div class="entry-meta">
    <div class="rule"></div>
    <p class="last_commit" data-filepath="{{.File.Path}}">Last updated: <span></span></p>
    <p class="feedback">Have feedback on this page? <a href="mailto:digitalgov@gsa.gov?subject={{ .Title | markdownify }}">Send us an email »</a></p>
    <!-- Edit file on GitHub -->
    <a target="_blank" class="edit_file" href="https://github.com/GSA/digitalgov.gov" data-filepath="{{.File.Path}}" title="Edit in GitHub"><img src="{{ "img/GitHub-Mark-32px.png" | absURL }}" alt="GitHub Logo"><span>Edit</span></a>
  </div>

</div>
{{ end }}
