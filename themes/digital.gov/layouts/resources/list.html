{{ define "content" }}


<main id="resources" role="main">
  <article>
    \
    <header>
      <div class="grid-container grid-container-desktop">
        <div class="grid-row">
          <div class="grid-col-12">

            {{/* Page Title */}}
            <h1>{{- .Title | markdownify -}} </h1>

            {{/* Deck */}}
            {{- if .Params.deck -}}
            <div class="deck">{{- .Params.deck | markdownify -}}</div>
            {{- end -}}

            {{/* {{ partial "last-updated" . }} */}}
          </div>
        </div>
      </div>
    </header>

    <section>
      <div class="grid-container grid-container-desktop">
        <div class="grid-row grid-gap-4">
          <div class="grid-col-12">
            {{/* Top / Popular Resources */}}
            {{- $resources := (where .Pages "Section" "resources") ".Params.weight" 3 -}}
            {{/* If there are any resources at all... */}}
            {{- if $resources -}}
            <div class="list-collection list-collection-resources">
              <h2>Popular Resources</h2>
              <ul class="add-list-reset">
                {{- range sort $resources "Title" "asc" -}}
                  {{- if eq .Params.weight 3 -}}
                  <li><a href="{{- .Permalink -}}"><i class="far fa-lightbulb"></i> <span>{{ .Title | markdownify }}</span></a> {{- if .Params.deck }}{{- end -}}</li>
                  {{- end -}}
                {{- end -}}
              </ul>
              <footer>
                <div class="grid-row grid-gap-2">
                  <div class="grid-col-12">
                    <p class="more"><a href="/resources"><span>See all resources</span> <i class="fas fa-arrow-circle-right"></i></a></p>
                  </div>
                </div>
              </footer>
            </div>
            {{- end -}}

          </div>
        </div>
      </div>
    </section>
    
    <section class="topic-buttons">
      <div class="grid-container grid-container-desktop">
        <div class="grid-row grid-gap-2">
          {{- $top_topics := $.Site.Taxonomies.topics -}}
          {{- range $name, $taxonomy := $top_topics -}}
            {{- with $.Site.GetPage (printf "/topics/%s" $name) -}}
              {{- if or (eq .Params.weight 2) (eq .Params.weight 3) -}}
                <div class="grid-col-12 tablet:grid-col-4 tablet:flex-6">
                  <div class="topic topic-slim" data-edit-this="{{- .File.Path -}}">
                    <h3>
                      <a class="text-no-underline text-ink" href="{{- .URL | absURL -}}" title="{{- .Title -}}">{{- .Title -}} <span>&#8594;</span></a>
                    </h3>
                  </div>
                </div>
              {{- end -}}
            {{- end -}}
          {{- end -}}
        </div>
      </div>
    </section>

  </article>
</main>

{{ end }} {{/* end 'content' block */}}
