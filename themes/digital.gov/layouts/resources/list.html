{{ define "content" }}

<main role="main">
  <article>
    <header>
      <div class="grid-container grid-container-desktop">
        <div class="grid-row">
          <div class="grid-col-12">

            {{/* Page Title */}}
            <h1>{{- .Title | markdownify -}} </h1>

            {{/* Deck */}}
            {{- if .Params.deck -}}
            <div class="deck">{{- .Params.deck | markdownify -}}</div>
            {{- end -}}

            {{/* {{ partial "last-updated" . }} */}}
          </div>
        </div>
      </div>
    </header>

    <section>
      <div class="grid-container grid-container-desktop">
        <div class="grid-row">
          <div class="grid-col-12">

            {{ range $key, $value := .Site.Taxonomies.topics }}
              {{ with $.Site.GetPage (printf "/topics/%s" $key) }}
                {{ $resources := (where $value.Pages "Section" "resources") }}
                {{ if $resources }}
                <div class="list-related">
                  <h2>{{ .Title }}</h2>
                  <ul class="add-list-reset">
                    {{ range $resources }}
                      <li><i class="far fa-file"></i> <a href="{{- .Permalink -}}"><strong>{{ .Title | markdownify }}</strong></a> {{- if .Params.deck }} — {{ .Params.deck -}}{{- end -}}</li>
                    {{ end }}
                  </ul>
                  <p>More in <a href="{{ .Permalink }}" title="{{ .Title }}">{{ .Title }} »</a></p>
                </div>
                {{ end }}
              {{ end }}
            {{ end }}

          </div>
        </div>
      </div>
    </section>
  </article>
</main>

{{ end }} {{/* end 'content' block */}}
