{{ define "content" }}

<main role="main" id="training">

  <article>
    <div class="grid-container grid-container-desktop">
      {{/* header */}}
      <div class="grid-row">
        <div class="grid-col-12">
          <header>
            <h6 class="breadcrumb"><a href="{{ "training/" | absURL }}"> <i class="fas fa-arrow-left"></i> <span>All Training</span> </a></h6>
            {{/* Page Title */}}
            <h1>{{- .Title | markdownify -}} </h1>

            {{/* Deck */}}
            {{- if .Params.deck -}}
            <div class="deck">{{- .Params.deck -}}</div>
            {{- end -}}
          </header>
        </div>
      </div>

      <div class="grid-row grid-gap-3">
        <div class="grid-col-12">

          {{/* Get the file name */}}
          {{/* Filename == topic name */}}
          {{ $topic := .File.BaseFileName }}
          {{/* Get all the pages for that topic */}}
          {{ $topic := (index $.Site.Taxonomies.topics $topic) }}
          {{/* Then get only the past events for that topic */}}
          {{ $topic := (where $topic "Section" "events") }}
          {{/* Now we sort the list and only show the past events */}}
          {{ $topic := (where $topic "Date" "lt" now) }}
          {{ range $topic }}
            {{ .Render "training-card"}}
          {{ end }}

        </div>
      </div>
    </div>
  </article>
</main>

{{ end }} {{/* end 'content' block */}}
