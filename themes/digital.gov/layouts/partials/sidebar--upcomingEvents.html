<div id="tribe-events-list-widget-8" class="widget widget-2 widget-last tribe-events-list-widget">
  <div class="widget-wrap">
    <h3 class="widgettitle">
      <span>Upcoming Events</span>
    </h3>
    <ol class="tribe-list-widget">

      {{ $now := now }}
      {{ $events := where .Site.Pages "Section" "events" }}
      {{ $events := (where $events ".Params.date" "ge" $now).ByDate }}

      {{ range first 4 $events }}
        <li class="tribe-events-list-widget-events type-tribe_events  tribe-clearfix">

          <!-- Event Title -->
          <h4 class="tribe-event-title">
            {{/* TODO: apply this more generalized prefix to other instances */}}

            {{ if .Params.venue.is_inperson }}
              {{ if .Params.venue.is_remote }}
                {{ $.Scratch.Set "prefix" "In-Person & Online: " }}
              {{ else }}
                {{ $.Scratch.Set "prefix" "In-Person: " }}
              {{ end }}
            {{ else }}
              {{ $.Scratch.Set "prefix" "Online: " }}
            {{ end }}

            <a href="{{ .URL }}" rel="bookmark">{{ $.Scratch.Get "prefix" }}{{ .Title }}</a>
          </h4>

          <!-- Event Time -->
          <div class="tribe-event-duration">
            <span class="tribe-event-date-start">{{ dateFormat "January 02 @ 3:04 PM" .Params.date }}</span> - <span class="tribe-event-time">{{ dateFormat "3:04 PM" .Params.end_date }}</span>
          </div>
        </li>
      {{ end }}
    </ol><!-- .tribe-list-widget -->

    <p class="tribe-events-widget-link">
      <a href="{{ "/events" | absURL }}" rel="bookmark">View All Events</a>
    </p>

  </div>
</div>

{{/* TODO: What is this and why is it here? */}}
{{/*
<script type="application/ld+json">
  [{"@context" : "http://schema.org",
  "@type" : "Event",
  "name" : "In-Person: Present with Charisma",
  "description" : "&lt;p&gt; In this practical, hands-on course, we will explore the use of flexibility and creativity, the alignment of body language, use of the voice, and the emotional connection through experiential activities.&lt;/p&gt;\\n",
  "url" : "https://www.digitalgov.gov/event/present-with-charisma/",
  "startDate" : "2017-06-14T13:00:00+00:00",
  "endDate" : "2017-06-14T15:30:00+00:00",
  "location" : {
    "@type": "Place",
    "name": "GSA Central Office",
    "description": "",
    "url": "https://www.digitalgov.gov/venue/gsa-central-office-2/",
    "address": {
      "streetAddress": "1800 F Street NW",
      "addressLocality": "Washington",
      "addressRegion": "DC",
      "postalCode": "20405",
      "addressCountry": "United States"
    },
    "telephone": "",
    "sameAs": ""
  },
  "organizer" : {
    "@type": "Person",
    "name": "DigitalGov University",
    "description": "",
    "url": "https://www.digitalgov.gov/organizer/digitalgov-university/",
    "telephone": "",
    "email": "",
    "sameAs": ""
  }},{"@context" : "http://schema.org",
  "@type" : "Event",
  "name" : "Online: Plain Language Action and Information Network (PLAIN) June Meeting",
  "description" : "&lt;p&gt;This month\\'s meeting features Katherine Spivey on Plain Language Spectrum \u2013 -how to move forward with plain language when you don\\'t necessarily have permission to edit. &lt;/p&gt;\\n",
  "image" : "https://s3.amazonaws.com/sitesusa/wp-content/uploads/sites/212/2014/09/event-featured-210-x-150-plain-language-chris2766-iStock-Thinkstock-477440077.jpg",
  "url" : "https://www.digitalgov.gov/event/june-2017-plain-meeting/",
  "startDate" : "2017-06-14T18:00:00+00:00",
  "endDate" : "2017-06-14T19:00:00+00:00",
  "location" : {
    "@type": "Place",
    "name": "Webinar",
    "description": "",
    "url": "https://www.digitalgov.gov/venue/webinar/",
    "address": {},
    "telephone": "",
    "sameAs": ""
  },
  "organizer" : {
    "@type": "Person",
    "name": "DigitalGov University",
    "description": "",
    "url": "https://www.digitalgov.gov/organizer/digitalgov-university/",
    "telephone": "",
    "email": "",
    "sameAs": ""
  }},{"@context" : "http://schema.org",
  "@type" : "Event",
  "name" : "In-Person &amp; Online: June Challenge and Prize Community of Practice Meeting",
  "description" : "&lt;p&gt;Join us for our June meeting, where we\\'ll focus on the dynamics and benefits of public-private partnerships.&lt;/p&gt;\\n",
  "image" : "https://s3.amazonaws.com/sitesusa/wp-content/uploads/sites/212/2016/10/PC-Toolkit-Brand-FINAL-LOGO.jpg",
  "url" : "https://www.digitalgov.gov/event/june-challenge-and-prize-community-of-practice-meeting/",
  "startDate" : "2017-06-20T13:00:00+00:00",
  "endDate" : "2017-06-20T16:00:00+00:00",
  "location" : {
    "@type": "Place",
    "name": "GSA Central Office &amp; Livestream",
    "description": "",
    "url": "https://www.digitalgov.gov/venue/gsa-central-office-livestream/",
    "address": {
      "streetAddress": "1800 F St NW",
      "addressLocality": "Washington",
      "addressRegion": "DC",
      "postalCode": "20405",
      "addressCountry": "United States"
    },
    "telephone": "",
    "sameAs": "https://www.gsa.gov/"
  },
  "organizer" : {
    "@type": "Person",
    "name": "DigitalGov University",
    "description": "",
    "url": "https://www.digitalgov.gov/organizer/digitalgov-university/",
    "telephone": "",
    "email": "",
    "sameAs": ""
  }},{"@context" : "http://schema.org",
  "@type" : "Event",
  "name" : "In-Person: DAP Analytics Maturity Workshop",
  "description" : "&lt;p&gt;This all-day workshop facilitated by the DAP Team will help DAP users assess your team/office/division\\'s current analytics maturity.&lt;/p&gt;\\n",
  "url" : "https://www.digitalgov.gov/event/in-person-dap-analytics-maturity-workshop/",
  "startDate" : "2017-06-21T13:00:00+00:00",
  "endDate" : "2017-06-21T20:00:00+00:00",
  "location" : {
    "@type": "Place",
    "name": "GSA Central Office",
    "description": "",
    "url": "https://www.digitalgov.gov/venue/gsa-central-office-2/",
    "address": {
      "streetAddress": "1800 F Street NW",
      "addressLocality": "Washington",
      "addressRegion": "DC",
      "postalCode": "20405",
      "addressCountry": "United States"
    },
    "telephone": "",
    "sameAs": ""
  },
  "organizer" : {
    "@type": "Person",
    "name": "DigitalGov University",
    "description": "",
    "url": "https://www.digitalgov.gov/organizer/digitalgov-university/",
    "telephone": "",
    "email": "",
    "sameAs": ""
  }}]
</script>
*/}}
