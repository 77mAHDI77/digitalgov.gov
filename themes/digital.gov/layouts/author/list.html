{{ define "content" }}
<main role="main">
  <section class="person">
    <div class="grid-container grid-container-desktop">
      <div class="grid-row grid-gap-6">
        <div class="grid-col-12 tablet-lg:grid-col-5">
          <header>
            {{ $slug := .Title | urlize }}
            {{ $person := index $.Site.Data.people.authors $slug }}
            {{ $person_name := $person.display_name | default .Title }}

            {{ $slug := .Title | urlize }}
            {{ $person := index $.Site.Data.people.authors $slug }}
            {{ $person_name := $person.display_name | default .Title }}

            {{- if $person.github -}}
            <img class="profile" src="https://github.com/{{- $person.github -}}.png?size=100" srcset="https://www.github.com/{{-  $person.github -}}.png?size=200" alt="Photo: {{- $person_name -}}">
            {{- else -}}
            <img class="profile" src="http://placekitten.com/200/200" alt="">
            {{- end -}}
            <div>
              {{/* Name */}}
              <h1>{{ $person_name }}</h1>
              {{/* Bio */}}
              <div class="bio">

                {{- if or $person.location $person.agency -}}
                <p>
                  {{- if $person.agency -}}{{- $person.agency }} | {{ end -}}
                  {{- if $person.location -}}{{- $person.location}}{{- end -}}
                  {{ if $person.email }}<br/><a href="mailto:{{- $person.email -}}" title="Email {{ $person_name -}}">{{- $person.email -}}</a>{{- end -}}
                </p>
                {{- end -}}

                {{- with $person.bio -}}
                <p>{{- . | markdownify -}}</p>
                {{- end -}}
                {{/* Website */}}
                {{- with $person.website -}}<p><a rel="external" title="{{- $person_name -}} Website" href="{{- . -}}">{{- . -}}</a></p>{{- end -}}
                <ul class="add-list-reset">
                  {{- with $person.facebook -}}
                    <li><a class="facebook" rel="external" title="{{- $person_name -}} on Facebook" href="http://www.facebook.com/{{- $person.facebook -}}/"><i class="fab fa-facebook-square"></i></a></li>
                  {{- end -}}
                  {{- with $person.twitter -}}
                    <li><a class="twitter" rel="external" title="{{- $person_name -}} on Twitter" href="http://www.twitter.com/{{- $person.twitter -}}/"><i class="fab fa-twitter-square"></i></a></li>
                  {{- end -}}
                  {{- with $person.linkedin -}}
                    <li><a class="linkedin" rel="external" title="{{- $person_name -}} on LinkedIn" href="http://www.linkedin.com/in/{{- $person.linkedin -}}/"><i class="fab fa-linkedin"></i></a></li>
                  {{- end -}}
                  {{- with $person.youtube -}}
                    <li><a class="youtube" rel="external" title="{{- $person_name -}} on YouTube" href="http://www.youtube.com/user/{{- $person.youtube -}}"><i class="fab fa-youtube-square"></i></a></li>
                  {{- end -}}
                  {{- with $person.github -}}
                    <li><a class="github" rel="external" title="{{- $person_name -}} on GitHub" href="http://www.github.com/{{- $person.github -}}"><i class="fab fa-github-square"></i></a></li>
                  {{- end -}}
                  <li><a class="rss" title="RSS Feed for {{ $person_name }}" href="{{ .RSSLink }}"><i class="fas fa-rss-square"></i></a></li>
                  <li><a class="json" title="API for {{ $person_name }}" href="{{ .Permalink }}index.json"><i class="fab fa-js-square"></i></a></li>
                </ul>
              </div>
            </div>
          </header>
        </div>
        <div class="grid-col-12 tablet-lg:grid-col-7">
          <section class="article-list">

            {{/* Blog Posts by Author —
            List all of the blog posts by this author */}}
            {{ $pages := (where .Paginator.Pages "Section" "posts") }}
            {{/* If there are any pages/posts at all... */}}
            {{ if $pages }}
              <h3>News and resources from across our community</h3>
              {{/* Loop through all the pages */}}
              {{ range $pages }}

                {{/* If the source is identified in the article */}}
                {{- if .Params.source -}}
                  {{- $source := $.Site.GetPage "page" (print "source_" .Params.source ) -}}
                {{- end -}}

                {{/* If the type is a SPOT (means it links to another publication) */}}
                {{ if eq .Params.type "spot" }}
                  {{/* Spots — External links */}}

                  <article data-edit-this="{{- .File.Path -}}">
                    <p>
                      {{/* Favicon
                      If the there is a custom favicon set in /sources/source_[slug].md, then use that... */}}
                      {{- if .Params.source -}}

                        {{- $source := $.Site.GetPage "page" (print "source_" .Params.source ) -}}
                        {{- if $source.Params.icon -}}
                          <img src="{{ $source.Params.icon }}" alt="">
                        {{- else -}}
                          <img src="https://www.google.com/s2/favicons?domain={{- .Params.source_url -}}" alt="">
                        {{- end -}}

                      {{/* Otherwise, use the Favicon that Google stores for the site. */}}
                      {{- else -}}
                        <img src="https://www.google.com/s2/favicons?domain={{- .Params.source_url -}}" alt="">
                      {{- end -}}

                      {{- .Params.deck | markdownify }} <em>(via&nbsp;<a href="{{- .Params.source_url -}}">{{ .Params.source_name }}</a>)</em> <i class="fas fa-external-link-alt"></i></p>

                    <a href="{{- .Params.source_url -}}" title="{{- .Params.source_name -}}"><span></span></a>
                  </article>

                {{/* If the type is a digital.gov Blog Post */}}
                {{ else }}

                  <article data-edit-this="{{- .File.Path -}}">
                    <p><img src="{{ "img/digit-16.png" | absURL }}" alt=""><a href="{{- .Permalink -}}"><strong>{{- .Title | markdownify -}}</strong></a>{{- if .Params.deck }} — {{ .Params.deck -}}{{- end -}}&nbsp;<em class="date">({{ .Date.Format "Jan _2, 2006" -}})</em></p>
                    <a href="{{- .Permalink -}}" title="{{- .Title | markdownify -}}"><span></span></a>
                  </article>
                {{ end }}

              {{ end }}
            {{ end }}

          </section>
        </div>
      </div>
    </div>
  </section>
</main>
{{ end }}
