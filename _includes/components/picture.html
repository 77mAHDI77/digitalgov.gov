
{% capture img-base-url %}{{ site.baseurl }}/assets/img/dist/{{ include.img }}{% endcapture %}

{% if include.alt  %}
  {% assign thisAlt = include.alt %}
{% else %}
  {% assign thisAlt = "image" %}
{% endif %}

{% assign breakpoints = "1200,800,600" | split: ',' %}
{% assign break = breakpoints | size | minus: 1 %}

<picture>
  <!-- webp images -->
  {% for breakpoint in breakpoints %}
    <source type="image/webp" srcset="{{ img-base-url }}-{{ breakpoint }}w.webp, {{ img-base-url }}-{{ breakpoint | times: 2 }}w.webp 2x"{% if breakpoint != breakpoints[break] %} media="(min-width: {{ breakpoint }}px)"{% endif %}>
  {% endfor %}
  <!-- jpeg images -->
  {% for breakpoint in breakpoints %}
    {% if breakpoint != breakpoints[break] %}
      <source type="image/webp" srcset="{{ img-base-url }}-{{ breakpoint }}w.jpg, {{ img-base-url }}-{{ breakpoint | times: 2 }}w.jpg 2x"{% if breakpoint != breakpoints[break] %} media="(min-width: {{ breakpoint }}px)"{% endif %}>
    {% else %}
      <img srcset="{{ img-base-url }}-{{ breakpoint }}w.jpg, {{ img-base-url }}-{{ breakpoint | times: 2 }}w.jpg 2x" alt="{{ thisAlt }}">
    {% endif %}
  {% endfor %}
</picture>
